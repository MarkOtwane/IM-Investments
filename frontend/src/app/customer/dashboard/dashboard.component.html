<div class="dashboard">
  <!-- Top Bar -->
  <header class="dashboard-topbar">
    <div class="brand">
      <i class="fas fa-store"></i>
      <span>My Account</span>
    </div>

    <div class="search">
      <i class="fas fa-search"></i>
      <input type="text" placeholder="Search products, orders..." />
    </div>

    <div class="actions">
      <a routerLink="/customer/orders" class="top-link">
        <i class="fas fa-receipt"></i>
        <span>Orders</span>
      </a>
      <a routerLink="/customer/cart" class="top-link cart-link">
        <i class="fas fa-shopping-cart"></i>
        <span class="count" *ngIf="cartItemsCount > 0">{{ cartItemsCount }}</span>
      </a>
      <button class="top-link" (click)="logout()">
        <i class="fas fa-sign-out-alt"></i>
        <span>Logout</span>
      </button>
    </div>
  </header>

  <!-- Content -->
  <main class="dashboard-content">
    <!-- Hero -->
    <section class="hero">
      <div class="hero-text">
        <h1>Welcome back, {{ userName }}</h1>
        <p>Here's a quick overview of your account and shopping activity.</p>
      </div>
      <div class="hero-actions">
        <a routerLink="/customer/marketplace" class="btn-primary">
          <i class="fas fa-shopping-bag"></i>
          <span>Shop now</span>
        </a>
      </div>
    </section>

    <!-- KPI Cards -->
    <section class="kpis">
      <div class="kpi-card">
        <div class="kpi-icon primary"><i class="fas fa-box"></i></div>
        <div class="kpi-body">
          <div class="kpi-value">{{ stats.totalOrders }}</div>
          <div class="kpi-label">Total Orders</div>
        </div>
      </div>
      <div class="kpi-card">
        <div class="kpi-icon success"><i class="fas fa-dollar-sign"></i></div>
        <div class="kpi-body">
          <div class="kpi-value">${{ stats.totalSpent | number: '1.2-2' }}</div>
          <div class="kpi-label">Total Spent</div>
        </div>
      </div>
      <div class="kpi-card">
        <div class="kpi-icon warning"><i class="fas fa-gift"></i></div>
        <div class="kpi-body">
          <div class="kpi-value">{{ stats.loyaltyPoints }}</div>
          <div class="kpi-label">Loyalty Points</div>
        </div>
      </div>
    </section>

    <!-- Recent Orders -->
    <section class="panel">
      <div class="panel-header">
        <h2>Recent Orders</h2>
        <a routerLink="/customer/orders" class="link">View all</a>
      </div>
      <div class="table-wrapper" *ngIf="recentOrders?.length; else noOrders">
        <table class="orders-table">
          <thead>
            <tr>
              <th>Order #</th>
              <th>Date</th>
              <th>Status</th>
              <th>Total</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let order of recentOrders">
              <td>{{ order.id }}</td>
              <td>{{ order.date }}</td>
              <td>
                <span class="status-badge" [class]="'status-' + order.status.toLowerCase()">
                  <i [class]="getStatusIcon(order.status)"></i>
                  {{ order.status }}
                </span>
              </td>
              <td>${{ order.total | number: '1.2-2' }}</td>
              <td>
                <a class="btn-link" routerLink="/customer/orders">Details</a>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <ng-template #noOrders>
        <div class="empty">
          <i class="fas fa-clipboard-list"></i>
          <p>No recent orders yet.</p>
          <a routerLink="/customer/marketplace" class="btn-primary">Start shopping</a>
        </div>
      </ng-template>
    </section>

    <!-- Recommended Products -->
    <section class="panel">
      <div class="panel-header">
        <h2>Recommended for you</h2>
        <a routerLink="/customer/marketplace" class="link">Browse marketplace</a>
      </div>
      <div class="products-grid">
        <div class="product-card" *ngFor="let product of recommendedProducts">
          <div class="product-image">
            <img [src]="product.imageUrl" [alt]="product.name" />
          </div>
          <div class="product-body">
            <h3 class="product-title">{{ product.name }}</h3>
            <p class="product-price">${{ product.price | number: '1.2-2' }}</p>
            <div class="product-actions">
              <button class="btn-outline" (click)="addToCart(product)">
                <i class="fas fa-cart-plus"></i>
                <span>Add to cart</span>
              </button>
              <a class="btn-link" [routerLink]="['/customer/products', product.id]">View</a>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>
</div>
